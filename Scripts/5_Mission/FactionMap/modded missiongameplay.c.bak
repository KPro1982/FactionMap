modded class MissionGameplay
{
	bool m_IsEarPlugsEnabled = false;

	// Creating a reference variable for the earplugs widget and creating it when the game loads
	autoptr EarPlugsWidget m_earplugswidget = new EarPlugsWidget;
	
	override void OnUpdate(float timeslice)
	{
		super.OnUpdate(timeslice); 
	
		if ( GetGame().GetInput().LocalPress("UAEarPlugsToggle") && GetGame().GetUIManager().GetMenu() == NULL ) 
		{
			if (m_IsEarPlugsEnabled == false){ 
				m_IsEarPlugsEnabled = true;
				GetGame().GetSoundScene().SetSoundVolume(0.1,1);
        
				//Removing the chat functions as they arn't needed any more
        
				//Calling our Function to change the icon path to the icons within the mod
				m_earplugswidget.SetIcon("EarPlugs\\data\\volume_mute.edds");
			} else {
				m_IsEarPlugsEnabled = false;
				GetGame().GetSoundScene().SetSoundVolume(1,1);	
        
				//Removing the chat functions as they arn't needed any more
        
				//Calling our Function to change the icon path to the icons within the mod
				m_earplugswidget.SetIcon("EarPlugs\\data\\volume_up.edds");
			}
		}
	}
}